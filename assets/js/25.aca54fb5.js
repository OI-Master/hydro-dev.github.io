(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{196:function(t,a,s){"use strict";s.r(a);var e=s(3),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"hydrojudge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hydrojudge"}},[t._v("#")]),t._v(" hydrojudge")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("如果您是 vj4 用户，请参照 "),s("RouterLink",{attrs:{to:"/plugins/hydrojudge.html#作为独立进程安装"}},[t._v("作为独立进程安装")]),t._v(" 一节配置（设置处需设成 "),s("code",[t._v("type: vj4")]),t._v("）。")],1)]),t._v(" "),s("h2",{attrs:{id:"准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[t._v("#")]),t._v(" 准备")]),t._v(" "),s("p",[t._v("在配置评测机之前，请确认您的站点已经可以访问并正常登录/注册。")]),t._v(" "),s("p",[t._v("您应该预先下载您所要支持的语言的编译器，若您在配置完评测机后 升级/重新安装 了编译器，您需要重新启动评测机。")]),t._v(" "),s("p",[t._v("前往 "),s("a",{attrs:{href:"https://github.com/criyle/go-judge/actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("criyle/go-judge"),s("OutboundLink")],1),t._v(" 下载 executorserver。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("系统版本")]),t._v(" "),s("th",[t._v("文件名")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Windows 7+")]),t._v(" "),s("td",[t._v("executorserver.exe")])]),t._v(" "),s("tr",[s("td",[t._v("Linux 4.4+")]),t._v(" "),s("td",[t._v("executorserver-amd64")])]),t._v(" "),s("tr",[s("td",[t._v("MacOS ?+")]),t._v(" "),s("td",[t._v("executorserver-macos")])])])]),t._v(" "),s("p",[t._v("Executorserver 需要在后台"),s("strong",[t._v("以 root 权限")]),t._v("运行并监听 "),s("code",[t._v("127.0.0.1:5050")]),t._v(" 。\n可使用 pm2 进行管理。")]),t._v(" "),s("h2",{attrs:{id:"作为附加组件安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作为附加组件安装"}},[t._v("#")]),t._v(" 作为附加组件安装")]),t._v(" "),s("p",[t._v("安装 "),s("code",[t._v("@hydrooj/hydrojudge")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" global "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @hydrooj/hydrojudge\nhydrooj addon "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @hydrooj/hydrojudge\n")])])]),s("p",[t._v("启动 Hydro"),s("br"),t._v("\n打开 "),s("strong",[t._v("控制面板>系统设置")]),t._v(" 找到 HydroJudge.Langs 设置项。"),s("br"),t._v("\n在这里配置所需要的编程语言。（请确保已经安装所需的编译器/解释器）"),s("br"),t._v("\n配置文件采用 yaml 语法。"),s("br"),t._v("\n保存，并于 "),s("strong",[t._v("控制面板>系统概览")]),t._v(" 中重载 Hydro。")]),t._v(" "),s("h2",{attrs:{id:"作为独立进程安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作为独立进程安装"}},[t._v("#")]),t._v(" 作为独立进程安装")]),t._v(" "),s("p",[t._v("首先需要创建一个有 PRIV_JUDGE 权限的账户，具体方法参照 "),s("RouterLink",{attrs:{to:"/install/cli.html#创建评测账号"}},[t._v("此处")]),t._v("（在部署网页端的服务器上进行）（vj4 用户需参照 "),s("a",{attrs:{href:"https://github.com/vijos/vj4#judging",target:"_blank",rel:"noopener noreferrer"}},[t._v("vj4 的方法"),s("OutboundLink")],1),t._v(" 创建账户）。")],1),t._v(" "),s("p",[t._v("然后在运行评测机的服务器上执行下面的操作。")]),t._v(" "),s("p",[t._v("安装 hydrojudge 插件。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" global "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @hydrooj/hydrojudge\n")])])]),s("p",[t._v("创建目录 "),s("code",[t._v("~/.config/hydro")]),t._v("，在该目录下创建文件 "),s("code",[t._v("judge.yaml")]),t._v("，配置文件格式如下：")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hosts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("localhost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hydro "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vj4 用户请在此处填写 vj4")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server_url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8888/ "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Hydro 运行的网址")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" judge "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 评测账号用户名")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" abc123 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 评测账号密码")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("detail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 默认为 true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以下为可选配置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("testcases_max")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 单题最多测试点数量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("total_time_limit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 单题最大总测试时长")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("parallelism")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 单评测机评测进程数量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更多可选配置均可添加在此处，格式与前面的三排类似")]),t._v("\n")])])]),s("p",[t._v("在 "),s("a",{attrs:{href:"https://github.com/hydro-dev/Hydro/blob/9c0afa38e3e6fa886ab9e9237847893fa6714392/packages/hydrojudge/src/config.ts#L12",target:"_blank",rel:"noopener noreferrer"}},[t._v("此处"),s("OutboundLink")],1),t._v(" 的设置均可添加到可选配置处。")]),t._v(" "),s("p",[t._v("设置完之后，使用下面的指令即可开始运行（可以使用 pm2 管理）：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("hydrojudge\n")])])]),s("p",[t._v("HydroJudge 会发布不定期更新。您可以使用 "),s("code",[t._v("yarn global upgrade-interactive --latest")]),t._v(" 来检测并进行更新。")])])}),[],!1,null,null,null);a.default=r.exports}}]);